define("kg/wf/5.0.0/lib/loader",["node","./base","util"],function(t,n,o){function e(){var t=this;e.superclass.constructor.apply(t,arguments),t.__onScroll=l.buffer(i,d,t),t.start()}function i(){var t=this;if(!t.__loading){if(t.isAdjusting())return void t.__onScroll();var n=t.get("container");if(n[0].offsetWidth){var o=n.offset().top,e=t.get("diff"),i=t._curColHeights;i.length&&(o+=Math.min.apply(Math,i)),e+c(u).scrollTop()+c(u).height()>=o&&s.call(t)}}}function s(){function t(t,n){o.__loading=0,o.addItems(t,function(){n&&n.apply(this,arguments),i.call(o)})}function n(){o.end()}{var o=this;o.get("container")}o.__loading=1;var e=o.get("load");e&&e(t,n)}var a=t("node"),r=t("./base"),l=t("util"),c=a.all,u=window,d=50;e.ATTRS={diff:{value:0}},l.extend(e,r,{start:function(){this.resume()},end:function(){this.pause()},pause:function(){var t=this;t.__destroyed||(c(u).detach("scroll",t.__onScroll),t.__onScroll.stop())},resume:function(){var t=this;t.__destroyed||(c(u).on("scroll",t.__onScroll),t.__started=1,i.call(t))},destroy:function(){var t=this;t.end(),e.superclass.destroy.apply(t,arguments)}}),o.exports=e});